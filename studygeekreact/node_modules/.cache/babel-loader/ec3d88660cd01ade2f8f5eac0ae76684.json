{"ast":null,"code":"var _jsxFileName = \"/Users/junzhe/Desktop/studygeek/cs546-group1/studygeekreact/src/components/Navigation.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Menu } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport UserContext from './context/UserContext';\nimport jwt_decode from \"jwt-decode\";\n\nfunction Navigation() {\n  // check pathname and set active in nav bar\n  // const pathname = window.location.pathname;\n  // const path = pathname ==='/' ? 'home': pathname.substr(1);\n  // const [activeItem, setActiveItem ] = useState(path); \n  // const handleItemClick = (e, { name }) => setActiveItem(name);\n  const {\n    token,\n    setToken\n  } = useContext(UserContext);\n  useEffect(() => {\n    if (token) {\n      try {\n        const tokenInfo = jwt_decode(token);\n        const exp = tokenInfo.exp;\n\n        if (exp < Date.now() / 1000) {\n          localStorage.clear(\"token\");\n          setToken(null);\n        }\n      } catch (e) {\n        setToken(null);\n        localStorage.clear(\"token\");\n        console.log(e);\n      }\n    }\n  }); // useEffect(() => {\n  //   if (token){\n  //     setVisitor(false);\n  //     const tokenInfo = jwt_decode(localStorage.getItem(\"token\"));\n  //     if(tokenInfo){\n  //       setVisitor(false);\n  //       const statusId = tokenInfo.statusId;\n  //       const status = tokenInfo.status;\n  //       const url = `/${status}/${statusId}`\n  //       setUserUrl(url); \n  //       // console.log(userUrl);\n  //       // console.log(`im in nav, and user email is ${userEmail}`);\n  //     }\n  //   }\n  // },[token, userUrl]); \n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Menu, {\n    pointing: true,\n    secondary: true,\n    size: \"massive\",\n    color: \"teal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    name: \"home\" // active={activeItem === 'home'}\n    // onClick={handleItemClick}\n    ,\n    as: Link,\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }), token && /*#__PURE__*/React.createElement(Menu.Menu, {\n    position: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    name: \"My Page\" // active={activeItem === 'My Page'}\n    // onClick={handleItemClick}\n    ,\n    as: Link,\n    to: \"/myaccount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Menu.Item, {\n    name: \"logout\" // active={activeItem === 'logout'}\n    // onClick={handleItemClick}\n    ,\n    as: Link,\n    to: \"/logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  })), !token && /*#__PURE__*/React.createElement(Menu.Menu, {\n    position: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    name: \"signup\" // active={activeItem === 'signup'}\n    // onClick={handleItemClick}\n    ,\n    as: Link,\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Menu.Item, {\n    name: \"login\" // active={activeItem === 'login'}\n    // onClick={handleItemClick}\n    ,\n    as: Link,\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }))));\n}\n\nexport default Navigation;","map":{"version":3,"sources":["/Users/junzhe/Desktop/studygeek/cs546-group1/studygeekreact/src/components/Navigation.js"],"names":["React","useState","useEffect","useContext","Menu","Link","UserContext","jwt_decode","Navigation","token","setToken","tokenInfo","exp","Date","now","localStorage","clear","e","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Menu } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport UserContext from './context/UserContext';\nimport jwt_decode from \"jwt-decode\";\n\n\nfunction Navigation() {\n    // check pathname and set active in nav bar\n    // const pathname = window.location.pathname;\n    // const path = pathname ==='/' ? 'home': pathname.substr(1);\n    // const [activeItem, setActiveItem ] = useState(path); \n    // const handleItemClick = (e, { name }) => setActiveItem(name);\n\n    const {token, setToken} = useContext(UserContext);\n    useEffect(() => {\n      if(token){\n        try{\n          const tokenInfo = jwt_decode(token);\n          const exp = tokenInfo.exp;\n          if (exp < Date.now() / 1000){\n            localStorage.clear(\"token\");\n            setToken(null);\n          }\n        }catch(e){\n          setToken(null);\n          localStorage.clear(\"token\");\n          console.log(e);\n        }\n      }\n    });\n\n    // useEffect(() => {\n    //   if (token){\n    //     setVisitor(false);\n    //     const tokenInfo = jwt_decode(localStorage.getItem(\"token\"));\n    //     if(tokenInfo){\n    //       setVisitor(false);\n    //       const statusId = tokenInfo.statusId;\n    //       const status = tokenInfo.status;\n    //       const url = `/${status}/${statusId}`\n    //       setUserUrl(url); \n    //       // console.log(userUrl);\n    //       // console.log(`im in nav, and user email is ${userEmail}`);\n    //     }\n    //   }\n    // },[token, userUrl]); \n\n    return (\n      <div>\n        <Menu pointing secondary size='massive' color='teal'>\n          <Menu.Item\n            name='home'\n            // active={activeItem === 'home'}\n            // onClick={handleItemClick}\n            as={Link}\n            to='/'\n          />\n          { \n            token && <Menu.Menu position='right'>\n              <Menu.Item\n                name='My Page'\n                // active={activeItem === 'My Page'}\n                // onClick={handleItemClick}\n                as={Link}\n                to='/myaccount'\n              />\n              <Menu.Item\n              name='logout'\n              // active={activeItem === 'logout'}\n              // onClick={handleItemClick}\n              as={Link}\n              to='/logout'\n            />\n          </Menu.Menu>\n          } \n          {\n            !token && <Menu.Menu position='right'>\n              <Menu.Item\n                name='signup'\n                // active={activeItem === 'signup'}\n                // onClick={handleItemClick}\n                as={Link} \n                to='/signup'\n              />\n              <Menu.Item\n              name='login'\n              // active={activeItem === 'login'}\n              // onClick={handleItemClick}\n              as={Link}\n              to='/login'\n            />\n            </Menu.Menu>\n          }\n          \n        </Menu>\n      </div>\n    )\n    \n  }\n  \n\nexport default Navigation;\n"]},"metadata":{},"sourceType":"module"}